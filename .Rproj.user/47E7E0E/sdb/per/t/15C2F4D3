{
    "collab_server" : "",
    "contents" : "library(shiny)\nlibrary(simpleaffy)\nlibrary(affy)\nlibrary(ggplot2)\n\n\noptions(shiny.maxRequestSize = 100*1024^2)\nserver <- function(input, output) {\n   \n  \n  # REACTIVE VALUES ----------------------------------------------------\n  \n  rvalues <- reactiveValues()\n  rvalues$file_names <- NULL\n  rvalues$directory <- NULL\n  rvalues$raw.data <- NULL\n  rvalues$processed.data <- NULL\n  \n  # DATA UPDATING ------------------------------------------------------\n  \n  getRawData <- reactive({\n    data <- NULL\n    # Check for changes in the loaded files\n    if (!is.null(input$data_loader) & (is.null(rvalues$file_names) ||\n                                       length(input$data_loader$names)!=length(rvalues$file_names) || \n                                       all(sort(input$data_loader$names)==sort(rvalues$file_names)))) {\n      # Create a temporary directory\n      rvalues$directory <- paste0(tempdir(),\"\\\\\",gsub(\":\",\"_\",date()))\n      dir.create(rvalues$directory)\n      \n      # Rename the files to reset their original name\n      sapply(1:nrow(input$data_loader), \n             FUN=function(i) {\n               file.copy(input$data_loader$datapath[i], paste0(rvalues$directory, \"\\\\\",\n                                                               input$data_loader$name[i]))\n             })\n      \n      # Update the rvalues object\n      rvalues$file_names <- input$data_loader$name\n      rvalues$raw.data <- read.affy(path=rvalues$directory)\n      data <- rvalues$raw.data\n    }\n    return(data)\n  })\n  \n  \n  # OUTPUTS ------------------------------------------------------------\n  \n  output$file_list <- renderPlot({\n    raw.data <- getRawData()\n    res <- NULL\n    if(!is.null(rvalues$directory)){\n      res <- boxplot(raw.data)\n    }\n    print(res)\n  })\n  output$file_list2 <- renderPlot({\n    raw.data <- getRawData()\n    res <- NULL\n    data.deg <- AffyRNAdeg(raw.data)\n    res <-plotAffyRNAdeg(data.deg)\n    print(res)\n  })\n  # Generate a summary of the data\n  output$summary <- renderTable({\n    input$data_loader$names\n  })\n  # Generate an HTML table view of the data\n  output$table <- renderPlot({\n    hist(getRawData())\n  })\n  \n  \n}\nshinyServer(server)\n",
    "created" : 1461765176220.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1659784886",
    "id" : "15C2F4D3",
    "lastKnownWriteTime" : 1462979180,
    "last_content_update" : 1462979180185,
    "path" : "~/UNI/BIO/BioR/Affy_analisia/server.R",
    "project_path" : "Affy_analisia/server.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}